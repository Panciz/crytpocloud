<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Crypto Cloud Client</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<script th:inline="javascript">
$.ajaxSetup({
	  contentType: "application/json; charset=utf-8"
	});
/*<![CDATA[*/
function onGet(filename) {
	
	var request={};
	request.username=[[${username}]];
	request.filename=$('#downloadDirectory').val()+filename;
   	console.log(JSON.stringify(request));
   	$.post('/file/get',JSON.stringify(request),function(data){
   	
   	    $("#successget").toggleClass('in out'); 
   		
   	},'json');
}
/*]]>*/
</script>
<body>
	<div class="container-fluid" style="margin: 1%;">

		<h1>Crytpo Cloud Panel</h1>
		<p>
			User <span class="badge bg-primary" th:text="${username}"></span>
			using key <span class="badge bg-info text-dark" th:text="${key}"></span>
		</p>

		<div class="row col-4">
			<p class="badge bg-light text-dark">Download from cloud</p>
			<div class="col-12" style="margin-bottom: 10px;">
				<label for="exampleInputEmail1" class="form-label">Download
					Directory</label> <input type="text" class="form-control" value="/Users/panci/Desktop/"
					placeholder="/tmp/" id="downloadDirectory">
			</div>
			<div class="col-12 list-group" th:each="file: ${files}">
				<button th:onclick="onGet([[${file.filename}]]);"
					class="list-group-item list-group-item-action">
					<p th:text="${file.filename}" />
				</button>
			</div>
		</div>
		<div class="row col-2">
			<div class="alert alert-success fade out" id="successget">
				<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				File Download Started
			</div>
			<div class="alert alert-dangeer fade out" id="errorget">
				<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				File Download Error
			</div>
		</div>
	</div>
</body>
</html>